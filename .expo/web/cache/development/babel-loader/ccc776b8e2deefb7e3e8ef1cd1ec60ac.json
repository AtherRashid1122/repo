{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nvar _jsxFileName = \"C:\\\\Users\\\\DELL PC\\\\Downloads\\\\GroovePacker\\\\src\\\\components\\\\login\\\\signin.js\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React, { Component, createRef } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport Platform from \"react-native-web/dist/exports/Platform\";\nimport { connect } from 'react-redux';\nimport { UpdateUrl } from \"../../actions/updateURL\";\nimport { Login, UserInfo } from \"../../actions/userAction\";\nimport NetInfo from \"@react-native-community/netinfo\";\nimport styles from \"../../style/signin\";\nimport globalStyles from \"../../style/global\";\nvar loginSuccess = false;\nvar loginFail = false;\nvar userInfoCheck = false;\n\nvar SignIn = function (_Component) {\n  _inherits(SignIn, _Component);\n\n  var _super = _createSuper(SignIn);\n\n  function SignIn(props) {\n    var _this;\n\n    _classCallCheck(this, SignIn);\n\n    _this = _super.call(this, props);\n\n    _this.validation = function () {\n      var data = _this.state.data;\n      var tenent = _this.state.tenent;\n\n      if (data.username === \"\" || data.password === \"\" || tenent === \"\") {\n        if (tenent === \"\") {\n          _this.setState({\n            tenent_validate: true\n          });\n        }\n\n        if (data.username === \"\") {\n          _this.setState({\n            username_validate: true\n          });\n        }\n\n        if (data.password === \"\") {\n          _this.setState({\n            password_validate: true\n          });\n        }\n      } else {\n        return true;\n      }\n    };\n\n    _this.InternetCheck = function _callee(data) {\n      var connectionInfo;\n      return _regeneratorRuntime.async(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return _regeneratorRuntime.awrap(NetInfo.fetch());\n\n            case 2:\n              connectionInfo = _context.sent;\n\n              if (connectionInfo.isConnected) {\n                _this.props.Login(data);\n\n                _this.setState({\n                  clickTime: new Date()\n                });\n\n                loginSuccess = false;\n                loginFail = false;\n              } else {\n                _this.setState({\n                  errorMessageShow: true,\n                  errorMessage: \"Please check your connection\"\n                });\n              }\n\n            case 4:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    };\n\n    _this.onSubmit = function () {\n      var data = _this.state.data;\n\n      if (_this.validation() === true) {\n        if (Platform.OS === \"web\") {\n          _this.props.Login(data);\n\n          _this.setState({\n            clickTime: new Date()\n          });\n\n          loginSuccess = false;\n          loginFail = false;\n        } else {\n          _this.InternetCheck(data);\n        }\n      }\n    };\n\n    _this.onChange = function (name, value) {\n      var data = _this.state.data;\n      var tenent = _this.state.tenent;\n      var suffix = _this.state.tenentSuffix;\n\n      if (name === \"username\") {\n        data[\"username\"] = value;\n\n        _this.setState({\n          username_validate: false\n        });\n      }\n\n      if (name === \"password\") {\n        data[\"password\"] = value;\n\n        _this.setState({\n          password_validate: false\n        });\n      }\n\n      if (name === \"tenent\") {\n        _this.setState({\n          tenent: value,\n          tenent_validate: false\n        });\n\n        tenent = value;\n      }\n\n      var urlDomain = suffix === \".groovepacker.com\" ? \".groovepackerapi.com\" : suffix;\n      var url = \"https://\" + tenent + urlDomain;\n\n      _this.props.UpdateUrl(url);\n\n      _this.setState({\n        data: data,\n        errorMessageShow: false\n      });\n    };\n\n    _this.changeTenant = function () {\n      var toggle = _this.state.toggle;\n      var tenentSuffix;\n\n      _this.setState({\n        toggle: !_this.state.toggle\n      });\n\n      if (toggle === true) {\n        tenentSuffix = \".groovepacker.com\";\n      } else {\n        tenentSuffix = \".dreadheadsports.com\";\n      }\n\n      _this.setState({\n        tenentSuffix: tenentSuffix\n      });\n\n      var urlDomain = tenentSuffix === \".groovepacker.com\" ? \".groovepackerapi.com\" : tenentSuffix;\n      var url = \"https://\" + _this.state.tenent + urlDomain;\n\n      _this.props.UpdateUrl(url);\n    };\n\n    _this.testFun = function (data) {\n      var val = data * 2;\n      return val;\n    };\n\n    _this.state = {\n      data: {\n        \"grant_type\": \"password\",\n        \"username\": \"\",\n        \"password\": \"\"\n      },\n      tenent: \"\",\n      url: \"\",\n      tenentSuffix: \".groovepacker.com\",\n      error_show: false,\n      errorMessage: \"\",\n      toggle: false\n    };\n    _this.onSubmit = _this.onSubmit.bind(_assertThisInitialized(_this));\n    _this.username = React.createRef();\n    _this.password = React.createRef();\n    return _this;\n  }\n\n  _createClass(SignIn, [{\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate() {\n      var state = this.state;\n\n      if (this.state.clickTime < this.props.login.time) {\n        if (loginSuccess === false && this.props.status === 200 && this.props.login.login === true) {\n          loginSuccess = true;\n          this.props.UserInfo();\n          userInfoCheck = true;\n        }\n\n        if (loginFail === false && this.props.status === \"\" && this.props.login.login === false) {\n          loginFail = true;\n          this.setState({\n            errorMessageShow: true,\n            errorMessage: \"Unable to log in. Please check your username and password\"\n          });\n        }\n      }\n\n      if (userInfoCheck === true && this.props && this.props.userInfo && this.props.userInfo !== this.state.userInfo) {\n        userInfoCheck = false;\n\n        if (this.props.userInfo.is_active === false) {\n          this.setState({\n            errorMessageShow: true,\n            errorMessage: \"The username is no longer active. Please contact your SuperAdmin.\"\n          });\n        } else {\n          this.props.navigation.navigate(\"ScanPack\");\n        }\n\n        this.props.UserInfo(false);\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      return React.createElement(View, {\n        style: styles.container,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 151,\n          columnNumber: 7\n        }\n      }, this.state.errorMessageShow && React.createElement(Text, {\n        style: styles.error,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 154,\n          columnNumber: 13\n        }\n      }, this.state.errorMessage), React.createElement(ScrollView, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 158,\n          columnNumber: 9\n        }\n      }, React.createElement(View, {\n        style: styles.header,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 159,\n          columnNumber: 11\n        }\n      }, React.createElement(View, {\n        style: styles.m_30,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 160,\n          columnNumber: 13\n        }\n      }, React.createElement(View, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 161,\n          columnNumber: 15\n        }\n      }, React.createElement(Text, {\n        style: styles.labelText,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 162,\n          columnNumber: 17\n        }\n      }, \"Tenent\"), React.createElement(TextInput, {\n        placeholder: \"Type your tenent name\",\n        name: \"tenent\",\n        autoFocus: true,\n        onChangeText: function onChangeText(text) {\n          _this2.onChange(\"tenent\", text);\n        },\n        style: styles.inputBox,\n        autoCapitalize: \"none\",\n        onSubmitEditing: function onSubmitEditing() {\n          _this2.username.current.focus();\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 163,\n          columnNumber: 17\n        }\n      }), React.createElement(TouchableOpacity, {\n        onPress: this.changeTenant.bind(this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 171,\n          columnNumber: 17\n        }\n      }, React.createElement(Text, {\n        style: styles.tenentSuffix,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 172,\n          columnNumber: 19\n        }\n      }, this.state.tenentSuffix === \".dreadheadsports.com\" ? \"Staging\" : this.state.tenentSuffix)), this.state.tenent_validate && React.createElement(Text, {\n        style: styles.inputError,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 178,\n          columnNumber: 21\n        }\n      }, \"Field are require to submit\")), React.createElement(View, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 183,\n          columnNumber: 15\n        }\n      }, React.createElement(Text, {\n        style: styles.labelText,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 184,\n          columnNumber: 17\n        }\n      }, \"Username\"), React.createElement(TextInput, {\n        placeholder: \"Type your name\",\n        name: \"username\",\n        ref: this.username,\n        onChangeText: function onChangeText(text) {\n          _this2.onChange(\"username\", text);\n        },\n        style: [styles.inputBox, globalStyles.mb_5],\n        autoCapitalize: \"none\",\n        onSubmitEditing: function onSubmitEditing() {\n          _this2.password.current.focus();\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 185,\n          columnNumber: 17\n        }\n      }), this.state.username_validate && React.createElement(Text, {\n        style: styles.inputError,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 195,\n          columnNumber: 21\n        }\n      }, \"Field are require to submit\")), React.createElement(View, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 200,\n          columnNumber: 15\n        }\n      }, React.createElement(Text, {\n        style: styles.labelText,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 201,\n          columnNumber: 17\n        }\n      }, \"Password\"), React.createElement(TextInput, {\n        placeholder: \"Type your password\",\n        name: \"Password\",\n        ref: this.password,\n        secureTextEntry: true,\n        onChangeText: function onChangeText(text) {\n          _this2.onChange(\"password\", text);\n        },\n        style: [styles.inputBox, globalStyles.mb_5],\n        autoCapitalize: \"none\",\n        onSubmitEditing: this.onSubmit,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 202,\n          columnNumber: 17\n        }\n      }), this.state.password_validate && React.createElement(Text, {\n        style: styles.inputError,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 213,\n          columnNumber: 21\n        }\n      }, \"Field are require to submit\"))), React.createElement(View, {\n        style: styles.buttonContainer,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 219,\n          columnNumber: 13\n        }\n      }, React.createElement(TouchableOpacity, {\n        onPress: this.onSubmit,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 220,\n          columnNumber: 15\n        }\n      }, React.createElement(Text, {\n        style: styles.button,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 221,\n          columnNumber: 17\n        }\n      }, \"Login\")), React.createElement(TouchableOpacity, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 225,\n          columnNumber: 15\n        }\n      }, React.createElement(Text, {\n        style: styles.button,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 226,\n          columnNumber: 17\n        }\n      }, \"Reset Password\"))))));\n    }\n  }]);\n\n  return SignIn;\n}(Component);\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    updateUrl: state.updateUrl.url,\n    status: state.user.status,\n    login: state.user,\n    userInfo: state.user.userInfo\n  };\n};\n\nvar mapDispatchToProps = {\n  UpdateUrl: UpdateUrl,\n  Login: Login,\n  UserInfo: UserInfo\n};\nexport default connect(mapStateToProps, mapDispatchToProps)(SignIn);","map":{"version":3,"sources":["C:/Users/DELL PC/Downloads/GroovePacker/src/components/login/signin.js"],"names":["React","Component","createRef","connect","UpdateUrl","Login","UserInfo","NetInfo","styles","globalStyles","loginSuccess","loginFail","userInfoCheck","SignIn","props","validation","data","state","tenent","username","password","setState","tenent_validate","username_validate","password_validate","InternetCheck","fetch","connectionInfo","isConnected","clickTime","Date","errorMessageShow","errorMessage","onSubmit","Platform","OS","onChange","name","value","suffix","tenentSuffix","urlDomain","url","changeTenant","toggle","testFun","val","error_show","bind","login","time","status","userInfo","is_active","navigation","navigate","container","error","header","m_30","labelText","text","inputBox","current","focus","inputError","mb_5","buttonContainer","button","mapStateToProps","updateUrl","user","mapDispatchToProps"],"mappings":"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","sourcesContent":["import React, { Component ,createRef } from 'react';\nimport { View, Text, TextInput , TouchableOpacity , ScrollView , Platform} from 'react-native';\nimport { connect } from 'react-redux';\nimport { UpdateUrl } from '../../actions/updateURL';\nimport { Login , UserInfo } from \"../../actions/userAction\";\nimport NetInfo from \"@react-native-community/netinfo\";\nimport styles from '../../style/signin';\nimport globalStyles from '../../style/global';\n\nlet loginSuccess = false;\nlet loginFail = false;\nlet userInfoCheck = false;\n\nclass SignIn extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      data: {\n          \"grant_type\": \"password\",\n          \"username\": \"\",\n          \"password\": \"\"\n      },\n      tenent: \"\",\n      url: \"\",\n      tenentSuffix: \".groovepacker.com\",\n      error_show: false,\n      errorMessage: \"\",\n      toggle: false\n    };\n    this.onSubmit = this.onSubmit.bind(this)\n    this.username = React.createRef();\n    this.password = React.createRef();\n  }\n\n  validation = () => {\n    let data = this.state.data\n    let tenent = this.state.tenent\n    if(data.username === \"\" || data.password === \"\" || tenent === \"\")\n    {\n      if(tenent === \"\"){\n        this.setState({tenent_validate: true})\n      }\n      if(data.username === \"\"){\n        this.setState({username_validate: true})\n      }\n      if(data.password === \"\"){\n        this.setState({password_validate: true})\n      }\n    }\n    else{\n      return true;\n    }\n  }\n\n  componentDidUpdate(){\n    let state = this.state\n    if(this.state.clickTime < this.props.login.time){\n      if(loginSuccess === false && this.props.status === 200 && this.props.login.login === true ){\n        loginSuccess = true\n        this.props.UserInfo()\n        userInfoCheck = true\n      }\n      if(loginFail === false && this.props.status === \"\" && this.props.login.login === false){\n        loginFail = true\n        this.setState({errorMessageShow: true , errorMessage: \"Unable to log in. Please check your username and password\" })\n      }\n    }\n\n    if(userInfoCheck === true && this.props && this.props.userInfo && this.props.userInfo !== this.state.userInfo){\n      userInfoCheck = false\n      if(this.props.userInfo.is_active === false){\n        this.setState({errorMessageShow: true , errorMessage: \"The username is no longer active. Please contact your SuperAdmin.\" })\n      }else{\n        this.props.navigation.navigate(\"ScanPack\")\n      }\n      this.props.UserInfo(false)\n    }\n\n  }\n\n  InternetCheck = async(data) => {\n    const connectionInfo = await NetInfo.fetch();\n    if(connectionInfo.isConnected){\n      this.props.Login(data)\n      this.setState({clickTime: new Date()})\n      loginSuccess = false\n      loginFail = false\n    }else{\n      this.setState({errorMessageShow: true , errorMessage: \"Please check your connection\"})\n    }\n  }\n\n  onSubmit = () => {\n    let data = this.state.data\n    if(this.validation() === true){\n      if(Platform.OS === \"web\"){\n        this.props.Login(data)\n        this.setState({clickTime: new Date()})\n        loginSuccess = false\n        loginFail = false\n      }else{\n        this.InternetCheck(data)\n      }\n    }\n  }\n\n  onChange = (name ,value) => {\n    let data = this.state.data;\n    let tenent = this.state.tenent;\n    let suffix = this.state.tenentSuffix\n    if(name === \"username\"){\n      data[\"username\"] = value\n      this.setState({username_validate: false})\n    }\n    if(name === \"password\"){\n      data[\"password\"] = value\n      this.setState({password_validate: false})\n    }\n    if(name === \"tenent\"){\n      this.setState({tenent: value , tenent_validate: false})\n      tenent = value;\n    }\n    let urlDomain = suffix === \".groovepacker.com\" ? \".groovepackerapi.com\" : suffix \n    let url =  \"https://\" + tenent + urlDomain\n    this.props.UpdateUrl(url)\n    this.setState({data , errorMessageShow: false})\n  }\n\n  changeTenant = () => {\n    let toggle = this.state.toggle;\n    let tenentSuffix;\n    this.setState({toggle: !this.state.toggle});\n    if(toggle === true){\n      tenentSuffix = \".groovepacker.com\";\n    } else {\n      tenentSuffix = \".dreadheadsports.com\";\n    }\n    this.setState({tenentSuffix});\n    let urlDomain = tenentSuffix === \".groovepacker.com\" ? \".groovepackerapi.com\" : tenentSuffix \n    let url =  \"https://\" + this.state.tenent + urlDomain;\n    this.props.UpdateUrl(url);\n  }\n\n  testFun = (data) => {\n    let val = data*2\n    return val\n  }\n\n  render() {\n    return (\n      <View style={styles.container}>\n        {\n          this.state.errorMessageShow &&\n            <Text style={styles.error}>\n                {this.state.errorMessage}\n            </Text>\n        }\n        <ScrollView>\n          <View style={styles.header}>\n            <View style={styles.m_30}>\n              <View>\n                <Text style={styles.labelText}>Tenent</Text>\n                <TextInput placeholder=\"Type your tenent name\"\n                           name=\"tenent\"\n                           autoFocus={true}\n                           onChangeText={(text) => {this.onChange(\"tenent\", text)}}\n                           style={styles.inputBox}\n                           autoCapitalize = 'none'\n                           onSubmitEditing={() => {this.username.current.focus()} }\n                           />\n                <TouchableOpacity onPress={this.changeTenant.bind(this)}>\n                  <Text style={styles.tenentSuffix}>\n                    {this.state.tenentSuffix === \".dreadheadsports.com\" ? \"Staging\" : this.state.tenentSuffix}\n                  </Text>\n                </TouchableOpacity>\n                {\n                  this.state.tenent_validate &&\n                    <Text style={styles.inputError}>\n                        Field are require to submit\n                    </Text>\n                }\n              </View>\n              <View>\n                <Text style={styles.labelText}>Username</Text>\n                <TextInput placeholder=\"Type your name\"\n                           name=\"username\"\n                           ref={this.username}\n                           onChangeText={(text) => {this.onChange(\"username\", text)}}\n                           style={[styles.inputBox, globalStyles.mb_5]}\n                           autoCapitalize = 'none'\n                           onSubmitEditing={() => {this.password.current.focus()}}\n                           />\n                {\n                  this.state.username_validate &&\n                    <Text style={styles.inputError}>\n                        Field are require to submit\n                    </Text>\n                }\n              </View>\n              <View>\n                <Text style={styles.labelText}>Password</Text>\n                <TextInput placeholder=\"Type your password\"\n                           name=\"Password\"\n                           ref={this.password}\n                           secureTextEntry\n                           onChangeText={(text) => {this.onChange(\"password\", text)}}\n                           style={[styles.inputBox, globalStyles.mb_5]}\n                           autoCapitalize = 'none'\n                           onSubmitEditing={this.onSubmit}\n                           />\n                {\n                  this.state.password_validate &&\n                    <Text style={styles.inputError}>\n                        Field are require to submit\n                    </Text>\n                }\n              </View>\n            </View>\n            <View style={styles.buttonContainer}>\n              <TouchableOpacity onPress={this.onSubmit}>\n                <Text style={styles.button}>\n                   Login\n                </Text>\n              </TouchableOpacity>\n              <TouchableOpacity >\n                <Text style={styles.button}>\n                  Reset Password\n                </Text>\n              </TouchableOpacity>\n            </View>\n          </View>\n        </ScrollView>\n      </View>\n    );\n  }\n}\n\nconst mapStateToProps = (state) => {\n  return {\n    updateUrl:  state.updateUrl.url,\n    status: state.user.status,\n    login: state.user,\n    userInfo: state.user.userInfo\n  }\n};\n\nconst mapDispatchToProps = {\n  UpdateUrl,\n  Login,\n  UserInfo\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SignIn)\n"]},"metadata":{},"sourceType":"module"}